replicaCount: 1

image:
  registry: 188451452903.dkr.ecr.us-east-1.amazonaws.com
  repository: enkryptai-dev/guardrail-model
  tag: 02d81dc
  pullPolicy: IfNotPresent

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

# Deployment configuration
deployment:
  enabled: true
  strategy:
    type: RollingUpdate

# Conditional deployment based on GR_MODELS_MODE
# Set to 'local' to deploy the guardrails pod, 'remote' to skip deployment
grModelsMode: local

# Runtime class for GPU workloads
runtimeClassName: nvidia

# Node selector for GPU nodes
nodeSelector:
  dedicated: llm-model-guardrail

# Tolerations for node taints
tolerations:
  - key: "instance"
    operator: "Equal"
    value: "llm-model-guardrail"
    effect: "NoSchedule"

# Service configuration
service:
  type: ClusterIP
  ports:
    - name: nsfw
      port: 8001
      targetPort: 8001
    - name: toxicity
      port: 8002
      targetPort: 8002
    - name: promptinject
      port: 8003
      targetPort: 8003
    - name: pii
      port: 8004
      targetPort: 8004
    - name: llm
      port: 8005
      targetPort: 8005
    - name: language
      port: 8006
      targetPort: 8006
    - name: router
      port: 8080
      targetPort: 8080

# Resource requests and limits
resources:
  requests:
    cpu: 2
    memory: 4Gi
  limits:
    cpu: 4
    memory: 8Gi

affinity: {}

secretRef:
  name: guardrails-model-secret

# Annotations for the deployment
annotations:
  secret.reloader.stakater.com/reload: guardrails-model-secret

labels:
  app: guardrails-model
